---
import { Icon } from "astro-iconify";

import AppLink from "@/components/astro/ui/AppLink.astro";

import { getInsight } from "@/scripts/carbon";

const CONTACT_LINKS = [
  {
    icon: "lucide:mail",
    label: "hello@namchee.dev",
    href: "mailto:hello@namchee.dev",
  },
  {
    icon: "simple-icons:github",
    label: "Namchee - GitHub",
    href: "https://github.com/Namchee",
  },
  {
    icon: "simple-icons:x",
    label: "@lakban_hitam - X (Twitter)",
    href: "https://twitter.com/lakban_hitam",
  },
  {
    icon: "simple-icons:linkedin",
    label: "Cristopher - LinkedIn",
    href: "https://www.linkedin.com/in/namchee/",
  },
];

const location = import.meta.env.PROD
  ? Astro.url.pathname
  : "https://developer.mozilla.org/en-US/";

const { time, carbon } = await getInsight(location);
---

<footer
  class="grid grid-cols-12 gap-6
  w-full max-w-7xl mx-auto
  py-8
  text-sm"
>
  <div class="flex items-center justify-between col-start-3 col-end-11">
    <div>
      <p>
        This page is loaded in <span
          title="Measured from speed index"
          class="font-medium text-link text-sm">{time.toFixed(2)} seconds</span
        > and emits <span class="font-medium text-link text-sm"
          >{carbon.toFixed(2)} grams</span
        >  of CO<sub>2</sub>
      </p>
    </div>

    <div class="flex items-center space-x-6">
      {
        CONTACT_LINKS.map((link) => (
          <AppLink href={link.href} title={link.label} class="group">
            <Icon
              name={link.icon}
              aria-hidden="true"
              focusable="false"
              class="w-4 h-auto text-content transition-colors hover:text-link group-focus:text-link"
            />
            <span class="sr-only">{link.label}</span>
          </AppLink>
        ))
      }
    </div>
  </div>

  <hr class="border-t border-border col-start-3 col-end-11" />

  <div class="flex items-center justify-between col-start-3 col-end-11">
    <div class="flex">
      <span>All contents are licensed under</span>
       &nbsp;
      <AppLink
        external
        href="http://creativecommons.org/licenses/by/4.0"
        rel="license noopener noreferrer"
        class="flex items-center text-link hover:text-accent transition-colors font-medium space-x-1"
      >
        <span>CC BY 4.0</span>
        <img
          class="h-4 w-auto"
          src="https://mirrors.creativecommons.org/presskit/icons/cc.svg"
        /><img
          class="h-4 w-auto"
          src="https://mirrors.creativecommons.org/presskit/icons/by.svg"
        />
      </AppLink>
    </div>

    <AppLink
      href="/colophon"
      class="text-link hover:text-accent focus:text-accent transition-colors"
    >
      Colophon
    </AppLink>
  </div>
</footer>
