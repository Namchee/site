---
import { Icon } from 'astro-iconify';

interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;

const links = [
  {
    href: '/',
    text: '/home',
  },
  {
    href: '/about',
    text: '/about',
  },
  {
    href: '/blog',
    text: '/blog',
  },
];
---

<div class="w-full max-w-7xl mx-auto grid grid-cols-12 items-start gap-4 py-8">
  <!-- start: logo -->
  <div class="flex items-center col-span-2 space-x-2">
    <a
      rel="noopener noreferrer"
      href="/"
      class="text-lg leading-none font-medium tracking-tighter logo"
    >
      <span data-letter="N">N</span>
      <span data-letter="a">a</span>
      <span data-letter="m">m</span>
      <span data-letter="c">c</span>
      <span data-letter="h">h</span>
      <span data-letter="e">e</span>
      <span data-letter="e">e</span>
    </a>

    <button class="speech-button">
      <Icon name="heroicons:speaker-wave" class="w-5 external__before" />
    </button>
  </div>
  <!-- end: logo -->

  <!-- start: job banner -->
  <div class="col-start-3 col-span-3 text-content-variant">
    <p>Software Engineer</p>
  </div>
  <!-- end: job banner -->

  <!-- start: nav -->
  <nav class="flex space-x-12 ml-auto col-start-10 col-span-full">
    {
      links.map(link => (
        <a
          href={link.href}
          data-hover={link.text}
          class="transition-colors hover:text-content-variant focus:text-content-variant link"
          class:list={{
            'font-medium tracking-tight': currentPath === link.href,
          }}
        >
          <span>{link.text}</span>
        </a>
      ))
    }
  </nav>
  <!-- end: nav -->
</div>

<script>
  const speechButton = document.querySelector('.speech-button');

  const utterance = new SpeechSynthesisUtterance('Namce');
  utterance.lang = 'id-ID'; // this is the correct pronounciation

  speechButton.addEventListener('click', () => {
    if (window.speechSynthesis) {
      window.speechSynthesis.speak(utterance);
    }
  });
</script>

<style>
  .link {
    position: relative;
    overflow-y: hidden;
  }

  .link span {
    display: inline-block;
    transition: transform 600ms easeOutQuart;
  }

  .link::before {
    content: attr(data-hover);
    position: absolute;
    display: inline-block;
    left: 0;
    bottom: 0;
    transform: translateY(100%);
    transition: transform 600ms easeOutQuart;
  }

  .link:hover span,
  .link:focus span {
    transform: translateY(-100%);
  }

  .link:hover::before,
  .link:focus::before {
    transform: translateY(0);
  }

  .logo {
    overflow-y: hidden;
    display: inline-flex;
  }

  .logo span {
    position: relative;
    display: inline-block;
  }

  .logo span::before {
    position: absolute;
    content: attr(data-letter);
    display: inline-block;
    left: 0;
    bottom: 0;
    transform: translateY(100%);
  }

  @for $i from 1 to 8 {
    .logo span:nth-child($i) {
      transition: transform 500ms calc(50ms * ($(i) - 1)) easeOutQuart;
    }

    .logo:hover span:nth-child($i),
    .logo:focus span:nth-child($i) {
      transform: translateY(-100%);
    }
  }
</style>
