---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";

import Layout from "@/components/astro/layout/Layout.astro";

import type { MarkdownFile } from '@/plugins/remark/types';
import TableOfContents from './TableOfContents.astro';

interface Props {
  frontmatter: CollectionEntry<'posts'>['data'] &
    MarkdownFile['data']['astro']['frontmatter'];
}

const { frontmatter } = Astro.props;
---

<Layout title={frontmatter.title} description={frontmatter.subtitle}>
  <article class="relative grid grid-cols-12 gap-4 my-16 lg:my-32 px-8">
    <header class="col-start-1 col-end-13 text-center text-2xl">
      <h1 class="text-heading font-medium">
        {frontmatter.title}
      </h1>

      <p class="text-lg mt-2">
        {frontmatter.subtitle}
      </p>

      <p class="text-base font-medium text-primary mt-12">
        {new Date(frontmatter.updatedAt).toLocaleString('en-US', {
          year: 'numeric',
          month: 'long',
          day: 'numeric',
        })} &mdash; {frontmatter.timeToRead} minutes read
      </p>
    </header>

    <figure class="mt-8 mb-16 col-start-2 col-end-12">
      <Image
        src={frontmatter.image.url}
        alt={frontmatter.title}
        width={1064}
        height={599}
        class="rounded-lg aspect-video"
      />
    </figure>

    <div class="col-start-1 col-end-3">
      <TableOfContents headings={frontmatter.headings} />
    </div>

    <section class="relative col-start-4 col-end-10 space-y-6">
      <slot />
    </section>
  </article>
</Layout>

<style is:inline>
  p {
    line-height: 1.75;
  }
  h2:not([id^=radix]) {
    font-size: 1.5rem;
    line-height: 1.5;
    font-weight: 500;
    color: oklch(var(--heading));
    margin-top: 4rem !important;
  }
</style>
